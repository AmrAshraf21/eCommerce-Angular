import{a as G}from"./chunk-M2KNEM5Y.js";import{b as R,c as V,d as j,f as L,l as Q,n as $,o as U,s as z}from"./chunk-L5ZD75W7.js";import{$a as c,Ga as T,La as u,S as f,Wa as q,X as g,Xa as F,Y as b,Ya as h,Za as S,_a as E,a as P,ab as e,b as D,bb as i,cb as s,db as C,ea as _,eb as w,fb as B,ib as y,jb as m,nb as M,pb as o,qb as p,rb as x,ta as v,tb as I,va as a,vb as N,wb as O,yb as A}from"./chunk-WXET5CKO.js";var J=()=>["/products"];function W(n,l){n&1&&(C(0),s(1,"i",44),w())}function X(n,l){n&1&&(e(0,"span",23),o(1,"In Stock"),i())}function Y(n,l){n&1&&(e(0,"span",24),o(1,"Out of stock"),i())}function Z(n,l){if(n&1&&(e(0,"p",45),o(1),i()),n&2){let t=m(2);a(),x("Category: ",t.product().category)}}function tt(n,l){if(n&1&&(e(0,"p",46),o(1),i()),n&2){let t=m(2);a(),x("Brand: ",t.product().brand)}}function et(n,l){if(n&1&&(e(0,"p",47),o(1),i()),n&2){let t=m(2);a(),x("Return Policy : ",t.product().returnPolicy)}}function it(n,l){if(n&1){let t=B();e(0,"div",11)(1,"div",12),s(2,"img",13),i(),e(3,"div",14)(4,"h2",15),o(5),i(),e(6,"p",16),o(7),i(),e(8,"div",17),u(9,W,2,0,"ng-container",18),e(10,"span",19),o(11),i()(),s(12,"hr",20),e(13,"p",21),o(14),N(15,"currency"),i(),e(16,"span",22),o(17,"Suggested payments with 6 month special financing"),i(),s(18,"hr",20),q(19,X,2,0,"span",23)(20,Y,2,0,"span",24),e(21,"a",25),o(22,"More Information"),i(),e(23,"div",26),u(24,Z,2,1,"p",27)(25,tt,2,1,"p",28),i(),s(26,"hr",20),e(27,"div",29)(28,"div",30)(29,"button",31),y("click",function(){g(t);let d=m();return b(d.decreaseQuantity())}),s(30,"i",32),i(),e(31,"span",33),o(32),i(),e(33,"button",34),y("click",function(){g(t);let d=m();return b(d.increaseQuantity())}),s(34,"i",35),i()(),e(35,"div",36)(36,"p",37),o(37," Only "),e(38,"span",38),o(39),i(),o(40," Left! "),i(),e(41,"p",39),o(42,"Don't miss it"),i()()(),e(43,"div",40)(44,"button",41),o(45," Buy Now "),i(),e(46,"button",42),y("click",function(){g(t);let d=m();return b(d.addToCartClicked())}),o(47),i()(),u(48,et,2,1,"p",43),i()()}if(n&2){let t,r=m();a(2),c("src",r.product().thumbnail,v)("alt",r.product().title),a(3),p(r.product().title),a(2),p(r.product().description),a(2),c("ngForOf",r.getStarArray(r.product().rating||0)),a(2),x("(",((t=r.product().reviews)==null?null:t.length)||0,")"),a(3),p(O(15,16,r.product().price)),a(5),F(r.product().stock>0?19:20),a(5),c("ngIf",r.product().category),a(),c("ngIf",r.product().brand),a(4),c("disabled",r.quantity()===0),a(3),p(r.quantity()||0),a(7),x("",r.product().stock," items"),a(7),c("disabled",r.quantity()===0),a(),x(" ",r.quantity()===0?"Add to Cart":"Update Cart"," "),a(),c("ngIf",r.product().returnPolicy)}}function nt(n,l){if(n&1&&s(0,"img",7),n&2){let t=l.$implicit,r=l.$index,d=m();c("src",t,v)("alt",d.product().title+" image "+(r+1))}}function rt(n,l){n&1&&(C(0),s(1,"i",53),w())}function at(n,l){if(n&1&&(e(0,"div",9)(1,"div",48)(2,"div")(3,"p",49),o(4),i(),e(5,"span",50),o(6),i()(),e(7,"p",50),o(8),i()(),e(9,"p",51),o(10),i(),e(11,"div",52),u(12,rt,2,0,"ng-container",18),i()()),n&2){let t=l.$implicit,r=m();a(4),p(t.reviewerName),a(2),p(t.reviewerEmail),a(2),p(t.date),a(2),p(t.comment),a(2),c("ngForOf",r.getStarArray(t.rating))}}function ot(n,l){n&1&&(e(0,"p",10),o(1,"No reviews available for this product yet."),i())}function lt(n,l){n&1&&(e(0,"div",54)(1,"p",55),o(2,"Product not found!"),i(),e(3,"a",56),o(4," Go Back "),i()()),n&2&&(a(3),c("routerLink",I(1,J)))}var H=class n{productService=f(G);router=f($);route=f(Q);product=_({});quantity=_(0);subscription;math=Math;ngOnInit(){let l=this.route.snapshot.paramMap.get("id");this.subscription=this.productService.getProductsById(Number(l)).subscribe({next:t=>{this.product.set(t);let r=this.productService.getCartItem(t.id);this.quantity.set(r?.quantity??0)},error:t=>{console.error("Error fetching product details:",t),this.router.navigate(["/products"])}})}getStarArray(l){let t=Math.floor(l);return Array(t).fill(0)}increaseQuantity(){console.log(this.quantity()),console.log(this.product());let l=this.product();l&&this.quantity()<l.stock&&(this.quantity.update(t=>t+1),this.updateCart())}decreaseQuantity(){this.quantity()>0&&(this.quantity.update(l=>l-1),this.updateCart())}updateCart(){let l=this.product(),t=this.quantity();t>0?this.productService.addToCart(D(P({},l),{quantity:t})):this.productService.removeFromCart(l.id)}addToCartClicked(){this.product()&&this.quantity()===0&&this.product().stock>0?(this.quantity.set(1),this.updateCart()):this.quantity()>0&&this.updateCart()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=T({type:n,selectors:[["app-product-details"]],decls:18,vars:5,consts:[["notFound",""],[1,"product-details","py-5"],[1,"container","mx-auto","px-4"],[1,"bg-blue-500","hover:bg-blue-600","text-white","font-bold","py-2","px-4","rounded","mb-6","inline-block",3,"routerLink"],["class","flex flex-col lg:flex-row gap-6 lg:gap-10 mt-4",4,"ngIf","ngIfElse"],[1,"text-2xl","font-bold","text-gray-800","mt-8","mb-4"],[1,"flex","flex-wrap","gap-4","justify-center","mt-4"],["width","150","height","150",1,"w-32","h-32","object-cover","rounded-md","shadow-sm","bg-gray-100","cursor-pointer","hover:scale-105","transition","duration-200",3,"src","alt"],[1,"reviews","space-y-6"],[1,"review","bg-white","my-4","p-4","rounded-lg","rounded-4","shadow-sm","border","border-gray-200"],[1,"text-center","text-gray-600"],[1,"flex","flex-col","lg:flex-row","gap-6","lg:gap-10","mt-4"],[1,"flex-1","bg-gray-100","rounded-lg","p-4","flex","items-center","justify-center"],["width","400","height","400",1,"max-w-full","h-auto","object-contain","rounded-md",3,"src","alt"],[1,"flex-1","lg:pl-5"],[1,"text-3xl","lg:text-4xl","font-bold","text-gray-900","mb-4"],[1,"text-lg","text-gray-700","mb-4"],[1,"flex","items-center","text-yellow-500","pb-4"],[4,"ngFor","ngForOf"],[1,"mx-3","text-gray-600"],[1,"my-4"],[1,"mb-0","text-4xl","font-semibold","text-gray-900"],[1,"inline-block","mb-4","text-gray-600"],[1,"text-green-600","font-semibold","text-lg"],[1,"text-red-600","font-semibold","text-lg"],["href","#",1,"text-blue-600","hover:underline","block","mt-3"],[1,"flex","flex-wrap","gap-x-4","mt-4","text-gray-700"],["class","cat px-3 py-1 bg-gray-200 rounded-full text-sm font-medium",4,"ngIf"],["class","brand px-3 py-1 bg-gray-200 rounded-full text-sm font-medium",4,"ngIf"],[1,"flex","items-center","gap-x-6"],[1,"counter","flex","items-center","space-x-3"],[1,"btn","btn-secondary","me-5",3,"click","disabled"],[1,"bi","bi-dash"],[1,"text-2xl","font-semibold"],[1,"btn","btn-primary","ms-5",3,"click"],[1,"bi","bi-plus","text-light"],[1,"text-center","pt-3"],[1,"mb-0","text-lg"],[1,"text-success","fw-semibold"],[1,"text-sm","text-gray-600"],[1,"flex","gap-x-4","mt-6"],[1,"btn","btn-success","me-5"],[1,"bg-green-600","hover:bg-green-700","text-white","font-bold","btn","btn-danger","rounded-lg","text-xl","transition","duration-200","ease-in-out","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","mb-0 mt-3 text-red-600 text-sm",4,"ngIf"],[1,"bi","bi-star-fill"],[1,"cat","px-3","py-1","bg-gray-200","rounded-full","text-sm","font-medium"],[1,"brand","px-3","py-1","bg-gray-200","rounded-full","text-sm","font-medium"],[1,"mb-0","mt-3","text-red-600","text-sm"],[1,"flex","justify-between","items-center","mb-2"],[1,"font-semibold","text-gray-900","fs-5","text-lg"],[1,"text-sm","text-secondary","text-gray-500"],[1,"comment","text-gray-700","mb-3","fs-4"],[1,"flex","items-center","text-yellow-500"],[1,"bi","bi-star-fill","text-success"],[1,"text-center","py-12"],[1,"text-2xl","text-red-600","font-semibold"],[1,"mt-6","bg-blue-500","hover:bg-blue-600","text-white","font-bold","py-2","px-4","rounded","inline-block",3,"routerLink"]],template:function(t,r){if(t&1&&(e(0,"section",1)(1,"div",2)(2,"a",3),o(3," \u2190 Back to Products "),i(),u(4,it,49,18,"div",4),e(5,"h3",5),o(6,"Product Gallery"),i(),e(7,"div",6),S(8,nt,1,2,"img",7,h),i(),e(10,"h2",5),o(11,"Customer Reviews"),i(),e(12,"div",8),S(13,at,13,5,"div",9,h,!1,ot,2,0,"p",10),i()()(),u(16,lt,5,2,"ng-template",null,0,A)),t&2){let d,k,K=M(17);a(2),c("routerLink",I(4,J)),a(2),c("ngIf",r.product())("ngIfElse",K),a(4),E((d=r.product())==null?null:d.images),a(5),E((k=r.product())==null?null:k.reviews)}},dependencies:[j,z,U,L,R,V],encapsulation:2})};export{H as ProductDetails};
