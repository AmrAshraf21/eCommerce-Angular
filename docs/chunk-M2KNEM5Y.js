import{i as I}from"./chunk-L5ZD75W7.js";import{Eb as o,N as c,S as u,a as n,b as m,ea as i}from"./chunk-WXET5CKO.js";var d=class a{products=i([]);CART_KEY="user_cart";httpClient=u(I);cartItems=i(this.getSavedCartItems());cartCount=o(()=>this.cartItems().length);totalCartQuantity=o(()=>this.cartItems().reduce((t,e)=>t+e.quantity,0));getProducts(){return this.httpClient.get("https://dummyjson.com/products")}getProductsById(t){return this.httpClient.get(`https://dummyjson.com/products/${t}`)}addToCart(t){this.cartItems.update(e=>{let s=e.findIndex(r=>r.id===t.id);if(s>-1){let r=[...e];return r[s]=m(n({},r[s]),{quantity:t.quantity}),this.saveCartItems(r),r}else{let r=[...e,n({},t)];return this.saveCartItems(r),r}})}removeFromCart(t){this.cartItems.update(e=>{let s=e.filter(r=>r.id!==t);return this.saveCartItems(s),s})}getCartItem(t){return this.cartItems().find(e=>e.id===t)}clearCart(){this.cartItems.set([]),localStorage.removeItem(this.CART_KEY)}saveCartItems(t){localStorage.setItem(this.CART_KEY,JSON.stringify(t))}getSavedCartItems(){let t=localStorage.getItem(this.CART_KEY);return t?JSON.parse(t):[]}static \u0275fac=function(e){return new(e||a)};static \u0275prov=c({token:a,factory:a.\u0275fac,providedIn:"root"})};export{d as a};
