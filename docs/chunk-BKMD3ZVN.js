import{$ as j,Db as p,Eb as l,N as S,S as I,a as o,b as u,da as b,ea as v}from"./chunk-WXET5CKO.js";function M(e){let t=p(()=>e());return O(t)?new Proxy(e,{get(n,i){return i in t?(b(n[i])||Object.defineProperty(n,i,{value:l(()=>n()[i]),configurable:!0}),M(n[i])):n[i]}}):e}var K=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function O(e){if(e===null||typeof e!="object"||P(e))return!1;let t=Object.getPrototypeOf(e);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(K.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function P(e){return typeof e?.[Symbol.iterator]=="function"}var A=new WeakMap,s=Symbol("STATE_SOURCE");function a(e,...t){e[s].update(n=>t.reduce((i,c)=>o(o({},i),typeof c=="function"?c(i):c),n)),U(e)}function H(e){return e[s]()}function F(e){return A.get(e[s])||[]}function U(e){let t=F(e);for(let n of t){let i=p(()=>H(e));n(i)}}function D(...e){let t=[...e],n=typeof t[0]=="function"?{}:t.shift(),i=t;return(()=>{class r{constructor(){let f=i.reduce((d,C)=>C(d),q()),{stateSignals:h,props:W,methods:T,hooks:E}=f,g=o(o(o({},h),W),T);this[s]=f[s];for(let d of Reflect.ownKeys(g))this[d]=g[d];let{onInit:y,onDestroy:w}=E;y&&y(),w&&I(j).onDestroy(w)}static \u0275fac=function(h){return new(h||r)};static \u0275prov=S({token:r,factory:r.\u0275fac,providedIn:n.providedIn||null})}return r})()}function q(){return{[s]:v({}),stateSignals:{},props:{},methods:{},hooks:{}}}function z(e){return t=>{let n=e(o(o(o({[s]:t[s]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),u(o({},t),{props:o(o({},t.props),n)})}}function k(e){return z(e)}function R(e){return t=>{let n=e(o(o(o({[s]:t[s]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),u(o({},t),{methods:o(o({},t.methods),n)})}}function x(e){return t=>{let n=typeof e=="function"?e():e,i=Reflect.ownKeys(n);t[s].update(r=>o(o({},r),n));let c=i.reduce((r,m)=>{let f=l(()=>t[s]()[m]);return u(o({},r),{[m]:M(f)})},{});return u(o({},t),{stateSignals:o(o({},t.stateSignals),c)})}}var tt=D({providedIn:"root"},x({wishlistItems:[]}),k(e=>({wishlistLength:l(()=>e.wishlistItems().length)})),R(e=>({addToWishlist:t=>{a(e,{wishlistItems:[...e.wishlistItems(),t()]}),console.log(e.wishlistItems())},removeFromWishlist:t=>{console.log(e.wishlistItems());let n=e.wishlistItems().filter(i=>i.id!==t);console.log(n),a(e,{wishlistItems:n})},clearWishlist:()=>a(e,{wishlistItems:[]}),toggleItem:t=>{let n=e.wishlistItems().some(i=>i.id===t.id);a(e,{wishlistItems:n?e.wishlistItems().filter(i=>i.id!==t.id):[...e.wishlistItems(),t]})}})));export{tt as a};
